[#_trait_ThingTypeAPI]
= Trait ThingTypeAPI

== Methods

// tag::methods[]
[#_trait_ThingTypeAPI_tymethod_label]
=== label

==== Signature

[source,rust]
----
fn label(&self) -> &str
----

==== Description

Retrieves the unique label of the type.

==== Returns

[source,rust]
----
&str
----

==== Code examples

[source,rust]
----
thing_type.label();
----

[#_trait_ThingTypeAPI_tymethod_is_abstract]
=== is_abstract

==== Signature

[source,rust]
----
fn is_abstract(&self) -> bool
----

==== Description

Checks if the type is prevented from having data instances (i.e. ``abstract``).

==== Returns

[source,rust]
----
bool
----

==== Code examples

[source,rust]
----
thing_type.is_abstract();
----

[#_trait_ThingTypeAPI_tymethod_is_root]
=== is_root

==== Signature

[source,rust]
----
fn is_root(&self) -> bool
----

==== Description

Checks if the type is a root type.

==== Returns

[source,rust]
----
bool
----

==== Code examples

[source,rust]
----
thing_type.is_root();
----

[#_trait_ThingTypeAPI_tymethod_is_deleted]
=== is_deleted

==== Signature

[source,rust]
----
fn is_deleted<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 self,
    transaction: &'life1 Transaction<'life2>
) -> Pin<Box<dyn Future<Output = Result<bool>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Checks if this type is deleted.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result<bool>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.is_deleted(transaction).await;
----

[#_trait_ThingTypeAPI_method_delete]
=== delete

==== Signature

[source,rust]
----
fn delete<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Deletes this type from the database.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.delete(transaction).await;
----

[#_trait_ThingTypeAPI_method_set_label]
=== set_label

==== Signature

[source,rust]
----
fn set_label<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>,
    new_label: String
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Renames the label of the type. The new label must remain unique.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `new_label` a| The new ``Label`` to be given to the type. a| `String` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.set_label(transaction, new_label).await;
----

[#_trait_ThingTypeAPI_method_set_abstract]
=== set_abstract

==== Signature

[source,rust]
----
fn set_abstract<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Set a type to be abstract, meaning it cannot have instances.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.set_abstract(transaction).await;
----

[#_trait_ThingTypeAPI_method_unset_abstract]
=== unset_abstract

==== Signature

[source,rust]
----
fn unset_abstract<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Set a type to be non-abstract, meaning it can have instances.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.unset_abstract(transaction).await;
----

[#_trait_ThingTypeAPI_method_get_owns]
=== get_owns

==== Signature

[source,rust]
----
fn get_owns(
    &self,
    transaction: &Transaction<'_>,
    value_type: Option<ValueType>,
    transitivity: Transitivity,
    annotations: Vec<Annotation>
) -> Result<BoxStream<'_, Result<AttributeType>>>
----

==== Description

Retrieves ``AttributeType`` that the instances of this ``ThingType`` are allowed to own directly or via inheritance.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&Transaction<'_>` 
a| `value_type` a| If specified, only attribute types of this ``ValueType`` will be retrieved. a| `Option<ValueType>` 
a| `transitivity` a| ``Transitivity::Transitive`` for direct and inherited ownership, ``Transitivity::Explicit`` for direct ownership only a| `Transitivity` 
a| `annotations` a| Only retrieve attribute types owned with annotations. a| `Vec<Annotation>` 
|===

==== Returns

[source,rust]
----
Result<BoxStream<'_, Result<AttributeType>>>
----

==== Code examples

[source,rust]
----
thing_type.get_owns(transaction, Some(value_type), Transitivity::Explicit, vec![Annotation::Key]).await;
----

[#_trait_ThingTypeAPI_method_get_owns_overridden]
=== get_owns_overridden

==== Signature

[source,rust]
----
fn get_owns_overridden<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 self,
    transaction: &'life1 Transaction<'life2>,
    overridden_attribute_type: AttributeType
) -> Pin<Box<dyn Future<Output = Result<Option<AttributeType>>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Retrieves an ``AttributeType``, ownership of which is overridden for this ``ThingType`` by a given ``attribute_type``.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `overridden_attribute_type` a| The ``AttributeType`` that overrides requested ``AttributeType`` a| `AttributeType` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result<Option<AttributeType>>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.get_owns_overridden(transaction, attribute_type).await;
----

[#_trait_ThingTypeAPI_method_set_owns]
=== set_owns

==== Signature

[source,rust]
----
fn set_owns<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>,
    attribute_type: AttributeType,
    overridden_attribute_type: Option<AttributeType>,
    annotations: Vec<Annotation>
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Allows the instances of this ``ThingType`` to own the given ``AttributeType``.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `attribute_type` a| The ``AttributeType`` to be owned by the instances of this type. a| `AttributeType` 
a| `overridden_attribute_type` a| The ``AttributeType`` that this attribute ownership overrides, if applicable. a| `Option<AttributeType>` 
a| `annotations` a| Adds annotations to the ownership. a| `Vec<Annotation>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.set_owns(transaction, attribute_type, Some(overridden_type), vec![Annotation::Key]).await;
----

[#_trait_ThingTypeAPI_method_unset_owns]
=== unset_owns

==== Signature

[source,rust]
----
fn unset_owns<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>,
    attribute_type: AttributeType
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Disallows the instances of this ``ThingType`` from owning the given ``AttributeType``.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `attribute_type` a| The ``AttributeType`` to not be owned by the type. a| `AttributeType` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.unset_owns(transaction, attribute_type).await;
----

[#_trait_ThingTypeAPI_method_get_plays]
=== get_plays

==== Signature

[source,rust]
----
fn get_plays(
    &self,
    transaction: &Transaction<'_>,
    transitivity: Transitivity
) -> Result<BoxStream<'_, Result<RoleType>>>
----

==== Description

Retrieves all direct and inherited (or direct only) roles that are allowed to be played by the instances of this ``ThingType``.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&Transaction<'_>` 
a| `transitivity` a| ``Transitivity::Transitive`` for direct and indirect playing, ``Transitivity::Explicit`` for direct playing only a| `Transitivity` 
|===

==== Returns

[source,rust]
----
Result<BoxStream<'_, Result<RoleType>>>
----

==== Code examples

[source,rust]
----
thing_type.get_plays(transaction, Transitivity::Explicit).await;
----

[#_trait_ThingTypeAPI_method_get_plays_overridden]
=== get_plays_overridden

==== Signature

[source,rust]
----
fn get_plays_overridden<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 self,
    transaction: &'life1 Transaction<'life2>,
    overridden_role_type: RoleType
) -> Pin<Box<dyn Future<Output = Result<Option<RoleType>>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Retrieves a ``RoleType`` that is overridden by the given ``role_type`` for this ``ThingType``.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `overridden_role_type` a| The ``RoleType`` that overrides an inherited role a| `RoleType` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result<Option<RoleType>>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.get_plays_overridden(transaction, role_type).await;
----

[#_trait_ThingTypeAPI_method_set_plays]
=== set_plays

==== Signature

[source,rust]
----
fn set_plays<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>,
    role_type: RoleType,
    overridden_role_type: Option<RoleType>
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Allows the instances of this ``ThingType`` to play the given role.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `role_type` a| The role to be played by the instances of this type a| `RoleType` 
a| `overridden_role_type` a| The role type that this role overrides, if applicable a| `Option<RoleType>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.set_plays(transaction, role_type, None).await;
----

[#_trait_ThingTypeAPI_method_unset_plays]
=== unset_plays

==== Signature

[source,rust]
----
fn unset_plays<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 mut self,
    transaction: &'life1 Transaction<'life2>,
    role_type: RoleType
) -> Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Disallows the instances of this ``ThingType`` from playing the given role.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
a| `role_type` a| The role to not be played by the instances of this type. a| `RoleType` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.unset_plays(transaction, role_type).await;
----

[#_trait_ThingTypeAPI_method_get_syntax]
=== get_syntax

==== Signature

[source,rust]
----
fn get_syntax<'life0, 'life1, 'life2, 'async_trait>(
    &'life0 self,
    transaction: &'life1 Transaction<'life2>
) -> Pin<Box<dyn Future<Output = Result<String>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Description

Produces a pattern for creating this ``ThingType`` in a ``define`` query.

==== Input parameters

[cols="~,~,~"]
[options="header"]
|===
|Name |Description |Type
a| `transaction` a| The current transaction a| `&'life1 Transaction<'life2>` 
|===

==== Returns

[source,rust]
----
Pin<Box<dyn Future<Output = Result<String>> + Send + 'async_trait>>
where
     Self: 'async_trait,
     'life0: 'async_trait,
     'life1: 'async_trait,
     'life2: 'async_trait,
----

==== Code examples

[source,rust]
----
thing_type.get_syntax(transaction).await;
----

// end::methods[]
